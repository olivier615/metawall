{"version":3,"file":"js/600.af5e935b.js","mappings":"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","sources":["webpack://posts-wall/./src/views/editProfileView.vue","webpack://posts-wall/./src/views/editProfileView.vue?2c26"],"sourcesContent":["<template>\r\n  <div class=\"col-md-7\">\r\n    <div\r\n      class=\"border border-2 border-dark py-3 position-relative bg-white mb-3\"\r\n    >\r\n      <h3 class=\"text-center mb-0 fw-bold\">修改個人資料</h3>\r\n      <div\r\n        class=\"\r\n          position-absolute\r\n          border\r\n          py-3\r\n          border-dark border-2\r\n          w-100\r\n          bg-white\r\n        \"\r\n        style=\"z-index: -1; top: 4px; left: -6px\"\r\n      >\r\n        <h3 class=\"text-center mb-0 fw-bold\">修改個人資料</h3>\r\n      </div>\r\n    </div>\r\n    <div class=\"mt-6\">\r\n      <ul class=\"ms-3 d-flex\">\r\n        <li\r\n          class=\"\r\n            py-2\r\n            px-4\r\n            border border-2 border-dark border-bottom-0\r\n            cus-tag-border-radio\r\n            bg-dark\r\n          \"\r\n        >\r\n          <router-link to=\"/editProfile\" class=\"text-white\"> 暱稱修改 </router-link>\r\n        </li>\r\n        <li\r\n          class=\"\r\n            py-2\r\n            px-4\r\n            border border-2 border-dark border-bottom-0\r\n            cus-tag-border-radio\r\n            bg-white\r\n          \"\r\n        >\r\n          <router-link to=\"/changePassword\" class=\"text-dark\"> 重設密碼 </router-link>\r\n        </li>\r\n      </ul>\r\n      <div class=\"px-md-3 px-lg-10 border border-2 border-dark bg-white cus-border-radio\">\r\n        <div class=\"d-flex align-items-center flex-column py-5\">\r\n          <img\r\n            :src=\"imgUrl ? imgUrl : userData.photo\"\r\n            alt=\"userAvatar\"\r\n            class=\"img-fluid border border-dark border-3 rounded-circle mb-3\"\r\n            style=\"height: 107px; width: 107px\"\r\n          />\r\n          <div class=\"mb-3\">\r\n            <div class=\"input-group mb-2\">\r\n              <label class=\"btn btn-dark cus-non-radio\">\r\n                <input\r\n                  ref=\"upload_img\"\r\n                  style=\"display: none\"\r\n                  type=\"file\"\r\n                  @change=\"uploadImage\"\r\n                />\r\n                上傳大頭照\r\n                <div v-if=\"isLoading\" class=\"spinner-border spinner-border-sm\" role=\"status\"></div>\r\n              </label>\r\n            </div>\r\n          </div>\r\n          <form>\r\n            <div class=\"input-group mb-3\">\r\n              <div class=\"d-flex flex-column\">\r\n                <label for=\"nickname\" class=\"mb-1\">暱稱</label>\r\n                <input\r\n                  type=\"text\"\r\n                  placeholder=\"暱稱\"\r\n                  id=\"nickname\"\r\n                  class=\"\r\n                    py-2\r\n                    form-control\r\n                    no-border-radius\r\n                    border-2 border-dark\r\n                    text-azeret\r\n                  \"\r\n                  v-model=\"userData.name\"\r\n                />\r\n              </div>\r\n            </div>\r\n            <div class=\"input-group mb-3\">\r\n              <div class=\"d-flex flex-column\">\r\n                <span class=\"mb-1\">性別</span>\r\n                <div class=\"d-flex\">\r\n                  <div class=\"form-check me-4\">\r\n                    <input\r\n                      class=\"form-check-input\"\r\n                      type=\"radio\"\r\n                      id=\"male\"\r\n                      name=\"gender\"\r\n                      value=\"male\"\r\n                      :checked=\"userData.gender === 'male'\"\r\n                      v-model=\"userData.gender\"\r\n                    />\r\n                    <label class=\"form-check-label\" for=\"male\"> 男性 </label>\r\n                  </div>\r\n                  <div class=\"form-check\">\r\n                    <input\r\n                      class=\"form-check-input\"\r\n                      type=\"radio\"\r\n                      id=\"female\"\r\n                      name=\"gender\"\r\n                      value=\"female\"\r\n                      :checked=\"userData.gender === 'female'\"\r\n                      v-model=\"userData.gender\"\r\n                    />\r\n                    <label class=\"form-check-label\" for=\"female\"> 女性 </label>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <!-- <div class=\"d-flex flex-column mb-3\">\r\n              <span class=\"text-warning\"\r\n                >1.圖片寬高比必需為 1:1，請重新輸入</span\r\n              >\r\n              <span class=\"text-warning\"\r\n                >2. 解析度寬度至少 300像素以上，請重新輸入</span\r\n              >\r\n            </div> -->\r\n            <div class=\"w-100\">\r\n              <button @click.prevent=\"updateProfile\"\r\n                class=\"\r\n                  btn btn-primary\r\n                  text-azeret\r\n                  fw-bold\r\n                  btn-blue-dark\r\n                  border-2\r\n                  w-100\r\n                \"\r\n              >\r\n                送出更新\r\n                <div v-if=\"isLoading\" class=\"spinner-border spinner-border-sm\" role=\"status\"></div>\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport emitter from '@/libs/emitter.js'\r\n\r\nexport default {\r\n  data () {\r\n    return {\r\n      isLoading: false,\r\n      fileInput: null,\r\n      url: process.env.VUE_APP_API,\r\n      userData: {},\r\n      imgUrl: ''\r\n    }\r\n  },\r\n  methods: {\r\n    updateProfile () {\r\n      this.isLoading = true\r\n      if (this.imgUrl !== this.userData.photo) {\r\n        this.userData.photo = this.imgUrl\r\n      }\r\n      this.$http.patch(`${this.url}/users/profile`, this.userData)\r\n        .then(res => {\r\n          this.userData = res.data.data\r\n          localStorage.setItem('userData', JSON.stringify(this.userData))\r\n          this.userData = JSON.parse(localStorage.userData)\r\n          const info = {\r\n            icon: 'success',\r\n            title: '個人訊息更新成功'\r\n          }\r\n          emitter.emit('popToast', info)\r\n          this.isLoading = false\r\n        })\r\n        .catch(err => {\r\n          const info = {\r\n            icon: 'error',\r\n            title: err.response.data.message\r\n          }\r\n          emitter.emit('popToast', info)\r\n          this.isLoading = false\r\n        })\r\n    },\r\n    uploadImage () {\r\n      this.isLoading = true\r\n      const file = this.fileInput.files[0]\r\n      if (!file) {\r\n        const info = {\r\n          icon: 'warning',\r\n          title: '未選擇圖片檔案'\r\n        }\r\n        emitter.emit('popToast', info)\r\n        this.isLoading = false\r\n        return\r\n      }\r\n      if (file.type !== 'image/jpeg' && file.type !== 'image/png' &&\r\n      file.type !== 'image/jpg' && file.type !== 'image/gif') {\r\n        const info = {\r\n          icon: 'warning',\r\n          title: '檔案類別僅限 jpg, jpeg, png 或 gif'\r\n        }\r\n        emitter.emit('popToast', info)\r\n        this.isLoading = false\r\n        return\r\n      }\r\n      if (file.size > 2 * 1024 * 1024) {\r\n        const info = {\r\n          icon: 'warning',\r\n          title: '上傳檔案須小於 2 MB'\r\n        }\r\n        emitter.emit('popToast', info)\r\n        this.isLoading = false\r\n        return\r\n      }\r\n      const formData = new FormData()\r\n      formData.append('image', file)\r\n      this.$http.post(`${this.url}/upload?type=avatar`, formData)\r\n        .then(res => {\r\n          this.imgUrl = res.data.imgUrl\r\n          this.isLoading = false\r\n        })\r\n        .catch((err) => {\r\n          const info = {\r\n            icon: 'error',\r\n            title: err.response.data.message\r\n          }\r\n          emitter.emit('popToast', info)\r\n          this.isLoading = false\r\n        })\r\n    }\r\n  },\r\n  mounted () {\r\n    this.fileInput = this.$refs.upload_img\r\n    if (localStorage.userData) {\r\n      this.userData = JSON.parse(localStorage.userData)\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./editProfileView.vue?vue&type=template&id=30ccca10\"\nimport script from \"./editProfileView.vue?vue&type=script&lang=js\"\nexport * from \"./editProfileView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\User\\\\Desktop\\\\node-week8-front end\\\\Meta Wall\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","style","role","for","_createElementBlock","_hoisted_2","_createVNode","_component_router_link","to","src","$data","photo","alt","ref","type","onChange","$options","_hoisted_19","placeholder","id","name","$event","_hoisted_22","value","checked","gender","_hoisted_26","_hoisted_29","onClick","data","isLoading","fileInput","url","process","userData","imgUrl","methods","updateProfile","this","$http","patch","then","res","localStorage","setItem","JSON","stringify","parse","info","icon","title","emitter","catch","err","response","message","uploadImage","file","files","size","formData","FormData","append","post","mounted","$refs","upload_img","__exports__","render"],"sourceRoot":""}