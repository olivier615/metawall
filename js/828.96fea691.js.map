{"version":3,"file":"js/828.96fea691.js","mappings":"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","sources":["webpack://posts-wall/./src/views/newPostView.vue","webpack://posts-wall/./src/views/newPostView.vue?49f7"],"sourcesContent":["<template>\r\n  <div class=\"col-md-7\">\r\n    <div class=\"border border-2 border-dark py-3 position-relative bg-white mb-3\">\r\n      <h3 class=\"text-center mb-0 fw-bold\">張貼動態</h3>\r\n      <div\r\n          class=\"position-absolute border py-3 border-dark border-2 w-100 bg-white\"\r\n          style=\"z-index: -1; top: 4px; left: -6px\"\r\n        >\r\n        <h3 class=\"text-center mb-0 fw-bold\">張貼動態</h3>\r\n      </div>\r\n    </div>\r\n    <form @submit.prevent=\"addNewPost\">\r\n      <div class=\"card border-2 border-dark cus-border-radio cus-shadow-bottom\">\r\n        <div class=\"card-body p-4\">\r\n          <div class=\"form-group mb-3\">\r\n            <label for=\"content\">\r\n              <span class=\"fw-bolder\">貼文內容</span>\r\n            </label>\r\n            <textarea\r\n              class=\"form-control border-2 border-dark mt-1 py-2 px-3 no-border-radius\r\n              fw-bolder\"\r\n              rows=\"5\"\r\n              placeholder=\"輸入您的貼文內容\"\r\n              v-model=\"data.content\"\r\n            ></textarea>\r\n          </div>\r\n          <div class=\"input-group mb-2\">\r\n            <label class=\"btn btn-dark\">\r\n              <input\r\n                ref=\"upload_img\"\r\n                style=\"display: none\"\r\n                type=\"file\"\r\n                @change=\"uploadImage\"\r\n              />\r\n              上傳圖片\r\n              <div v-if=\"isLoading\" class=\"spinner-border spinner-border-sm\" role=\"status\"></div>\r\n            </label>\r\n            <button type=\"button\" class=\"btn btn-outline-secondary\" v-if=\"imgUrl\" @click.prevent=\"imgUrl = ''\">\r\n              刪除圖片\r\n            </button>\r\n          </div>\r\n          <img :src=\"this.imgUrl\" v-if=\"this.imgUrl\"\r\n          class=\"cus-border-radio img-fluid border border-2 border-dark\"\r\n          alt=\"postImage\" style=\"width:100%\">\r\n          <p class=\"text-warning text-center mt-2 mb-2 fs-7 d-none\">\r\n            圖片檔案過大，僅限 1mb 以下檔案\r\n          </p>\r\n          <p class=\"text-warning text-center mt-2 mb-2 fs-7 d-none\">\r\n            圖片格式錯誤，僅限 JPG、PNG 圖片\r\n          </p>\r\n          <div class=\"d-flex justify-content-center\">\r\n            <button v-if=\"data.content\" type=\"submit\" class=\"btn btn-blue-dark btn-lg py-3 px-8 mt-5\r\n            text-white border-2 border-dark fw-bolder\"\r\n            >送出貼文\r\n              <div v-if=\"isLoading\" class=\"spinner-border spinner-border-sm\" role=\"status\"></div>\r\n            </button>\r\n            <button v-else disabled type=\"submit\" class=\"btn btn-gray-dark btn-lg py-3 px-8 mt-5\r\n            text-dark border-2 border-dark fw-bolder\"\r\n            >送出貼文</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport emitter from '@/libs/emitter.js'\r\n\r\nexport default {\r\n  data () {\r\n    return {\r\n      isLoading: false,\r\n      fileInput: null,\r\n      url: process.env.VUE_APP_API,\r\n      imgUrl: '',\r\n      data: {\r\n        content: '',\r\n        type: 'group',\r\n        image: ''\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    addNewPost () {\r\n      this.isLoading = true\r\n      if (this.data.content === '') {\r\n        const info = {\r\n          icon: 'warning',\r\n          title: '請輸入貼文內容'\r\n        }\r\n        emitter.emit('popToast', info)\r\n        this.isLoading = false\r\n      } else {\r\n        if (this.imgUrl !== '') {\r\n          this.data.image = this.imgUrl\r\n        }\r\n        this.$http.post(`${this.url}/posts`, this.data)\r\n          .then(() => {\r\n            const info = ({\r\n              icon: 'success',\r\n              title: '已新增貼文'\r\n            })\r\n            emitter.emit('popToast', info)\r\n            this.isLoading = false\r\n            this.$router.push('/postWall')\r\n          })\r\n          .catch(() => {\r\n            const info = {\r\n              icon: 'error',\r\n              title: '貼文上傳失敗'\r\n            }\r\n            emitter.emit('popToast', info)\r\n            this.isLoading = false\r\n          })\r\n      }\r\n    },\r\n    uploadImage () {\r\n      this.isLoading = true\r\n      const file = this.fileInput.files[0]\r\n      if (!file) {\r\n        const info = {\r\n          icon: 'warning',\r\n          title: '未選擇圖片檔案'\r\n        }\r\n        emitter.emit('popToast', info)\r\n        this.isLoading = false\r\n        return\r\n      }\r\n      if (file.type !== 'image/jpeg' && file.type !== 'image/png' &&\r\n      file.type !== 'image/jpg' && file.type !== 'image/gif') {\r\n        const info = {\r\n          icon: 'warning',\r\n          title: '檔案類別僅限 jpg, jpeg, png 或 gif'\r\n        }\r\n        emitter.emit('popToast', info)\r\n        this.isLoading = false\r\n        return\r\n      }\r\n      if (file.size > 2 * 1024 * 1024) {\r\n        const info = {\r\n          icon: 'warning',\r\n          title: '上傳檔案須小於 2 MB'\r\n        }\r\n        emitter.emit('popToast', info)\r\n        this.isLoading = false\r\n        return\r\n      }\r\n      const formData = new FormData()\r\n      formData.append('image', file)\r\n      this.$http.post(`${this.url}/upload`, formData)\r\n        .then(res => {\r\n          this.imgUrl = res.data.imgUrl\r\n          this.isLoading = false\r\n        })\r\n        .catch((err) => {\r\n          const info = {\r\n            icon: 'error',\r\n            title: err.response.data.message\r\n          }\r\n          emitter.emit('popToast', info)\r\n          this.isLoading = false\r\n        })\r\n    }\r\n  },\r\n  mounted () {\r\n    this.fileInput = this.$refs.upload_img\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./newPostView.vue?vue&type=template&id=10aceaa6\"\nimport script from \"./newPostView.vue?vue&type=script&lang=js\"\nexport * from \"./newPostView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\User\\\\Desktop\\\\node-week8-front end\\\\Meta Wall\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","style","for","role","type","disabled","_createElementBlock","_hoisted_2","onSubmit","$options","_hoisted_6","rows","placeholder","$data","content","$event","ref","onChange","onClick","imgUrl","src","alt","_hoisted_12","_hoisted_13","data","isLoading","fileInput","url","process","image","methods","addNewPost","this","info","icon","title","emitter","$http","post","then","$router","push","catch","uploadImage","file","files","size","formData","FormData","append","res","err","response","message","mounted","$refs","upload_img","__exports__","render"],"sourceRoot":""}