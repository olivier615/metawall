{"version":3,"file":"js/522.0a33fc9e.js","mappings":"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","sources":["webpack://posts-wall/./src/views/editPostView.vue","webpack://posts-wall/./src/views/editPostView.vue?cd98"],"sourcesContent":["<template>\r\n  <div class=\"col-md-7\">\r\n    <div class=\"border border-2 border-dark py-3 position-relative bg-white mb-3\">\r\n      <h3 class=\"text-center mb-0 fw-bold\">編輯動態</h3>\r\n      <div\r\n          class=\"position-absolute border py-3 border-dark border-2 w-100 bg-white\"\r\n          style=\"z-index: -1; top: 4px; left: -6px\"\r\n        >\r\n        <h3 class=\"text-center mb-0 fw-bold\">編輯動態</h3>\r\n      </div>\r\n    </div>\r\n    <form @submit.prevent=\"uploadEditPost\">\r\n      <div class=\"card border-2 border-dark cus-border-radio cus-shadow-bottom\">\r\n        <div class=\"card-body p-4\">\r\n          <div class=\"form-group mb-3\">\r\n            <label for=\"content\">\r\n              <span class=\"fw-bolder\">貼文內容</span>\r\n            </label>\r\n            <textarea\r\n              class=\"form-control border-2 border-dark mt-1 py-2 px-3 no-border-radius\r\n              fw-bolder\"\r\n              rows=\"5\"\r\n              placeholder=\"輸入您的貼文內容\"\r\n              v-model=\"post.content\"\r\n            ></textarea>\r\n          </div>\r\n          <div class=\"input-group mb-2\">\r\n            <label class=\"btn btn-dark\">\r\n              <input\r\n                ref=\"upload_img\"\r\n                style=\"display: none\"\r\n                type=\"file\"\r\n                @change=\"uploadImage\"\r\n              />\r\n              上傳圖片\r\n            </label>\r\n            <button type=\"button\" class=\"btn btn-outline-secondary\" v-if=\"imgUrl\" @click.prevent=\"imgUrl = ''\">\r\n              刪除圖片\r\n            </button>\r\n          </div>\r\n          <img :src=\"imgUrl\" v-if=\"imgUrl\"\r\n          class=\"cus-border-radio img-fluid border border-2 border-dark\"\r\n          alt=\"postImage\" style=\"width:100%\">\r\n          <p class=\"text-warning text-center mt-2 mb-2 fs-7 d-none\">\r\n            圖片檔案過大，僅限 1mb 以下檔案\r\n          </p>\r\n          <p class=\"text-warning text-center mt-2 mb-2 fs-7 d-none\">\r\n            圖片格式錯誤，僅限 JPG、PNG 圖片\r\n          </p>\r\n          <div class=\"d-flex justify-content-center\">\r\n            <button v-if=\"post.content\" type=\"submit\" class=\"btn btn-blue-dark btn-lg py-3 px-8 mt-5\r\n            text-white border-2 border-dark fw-bolder\"\r\n            >儲存貼文</button>\r\n            <button v-else disabled type=\"submit\" class=\"btn btn-gray-dark btn-lg py-3 px-8 mt-5\r\n            text-dark border-2 border-dark fw-bolder\"\r\n            >儲存貼文</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport emitter from '@/libs/emitter.js'\r\n\r\nexport default {\r\n  data () {\r\n    return {\r\n      fileInput: null,\r\n      url: process.env.VUE_APP_API,\r\n      imgUrl: '',\r\n      post: {}\r\n    }\r\n  },\r\n  methods: {\r\n    getEditPost () {\r\n      const { id } = this.$route.params\r\n      this.$http.get(`${this.url}/posts/${id}`)\r\n        .then(res => {\r\n          this.post = res.data.data\r\n          this.imgUrl = this.post.image\r\n        })\r\n    },\r\n    uploadEditPost () {\r\n      if (this.post.content === '') {\r\n        const info = {\r\n          icon: 'warning',\r\n          title: '請輸入貼文內容'\r\n        }\r\n        emitter.emit('popToast', info)\r\n      } else {\r\n        const editedPost = {\r\n          content: this.post.content,\r\n          image: this.imgUrl\r\n        }\r\n        this.$http.patch(`${this.url}/posts/${this.post._id}`, editedPost)\r\n          .then(() => {\r\n            const info = ({\r\n              icon: 'success',\r\n              title: '已編輯貼文'\r\n            })\r\n            emitter.emit('popToast', info)\r\n            this.$router.push('/postWall')\r\n          })\r\n          .catch(() => {\r\n            const info = {\r\n              icon: 'error',\r\n              title: '貼文編輯失敗'\r\n            }\r\n            emitter.emit('popToast', info)\r\n          })\r\n      }\r\n    },\r\n    uploadImage () {\r\n      const file = this.fileInput.files[0]\r\n      if (!file) {\r\n        const info = {\r\n          icon: 'warning',\r\n          title: '未選擇圖片檔案'\r\n        }\r\n        emitter.emit('popToast', info)\r\n        return\r\n      }\r\n      if (file.type !== 'image/jpeg' && file.type !== 'image/png' &&\r\n      file.type !== 'image/jpg' && file.type !== 'image/gif') {\r\n        const info = {\r\n          icon: 'warning',\r\n          title: '檔案類別僅限 jpg, jpeg, png 或 gif'\r\n        }\r\n        emitter.emit('popToast', info)\r\n        return\r\n      }\r\n      if (file.size > 2 * 1024 * 1024) {\r\n        const info = {\r\n          icon: 'warning',\r\n          title: '上傳檔案須小於 2 MB'\r\n        }\r\n        emitter.emit('popToast', info)\r\n        return\r\n      }\r\n      const formData = new FormData()\r\n      formData.append('image', file)\r\n      this.$http.post(`${this.url}/upload`, formData)\r\n        .then(res => {\r\n          this.imgUrl = res.data.imgUrl\r\n        })\r\n        .catch((err) => {\r\n          const info = {\r\n            icon: 'error',\r\n            title: err.response.data.message\r\n          }\r\n          emitter.emit('popToast', info)\r\n        })\r\n    }\r\n  },\r\n  mounted () {\r\n    this.fileInput = this.$refs.upload_img\r\n    this.getEditPost()\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./editPostView.vue?vue&type=template&id=3d56fcc4\"\nimport script from \"./editPostView.vue?vue&type=script&lang=js\"\nexport * from \"./editPostView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\User\\\\Desktop\\\\node-week8-front end\\\\Meta Wall\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","style","for","type","disabled","_createElementBlock","_hoisted_2","onSubmit","$options","_hoisted_6","rows","placeholder","$data","content","$event","ref","onChange","onClick","src","alt","_hoisted_11","_hoisted_12","data","fileInput","url","process","imgUrl","post","methods","getEditPost","id","this","$route","params","$http","get","then","res","image","uploadEditPost","info","icon","title","emitter","editedPost","patch","_id","$router","push","catch","uploadImage","file","files","size","formData","FormData","append","err","response","message","mounted","$refs","upload_img","__exports__","render"],"sourceRoot":""}